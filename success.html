<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Language" content="en">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="success.pageTitle">Thank You! | Wij Kopen Auto's</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Success page specific styles */
        .form-header {
            padding: 2rem 1rem;
            text-align: center;
        }
        
        .logo-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .logo-wrapper {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .logo-icon {
            font-size: 2.5rem;
            margin-right: 0.75rem;
            color: var(--primary);
        }
        
        .logo-text {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .trust-badge {
            display: inline-flex;
            align-items: center;
            background: rgba(26, 35, 126, 0.1);
            padding: 0.4rem 1rem;
            border-radius: 20px;
            margin-top: 0.5rem;
        }
        
        .trust-badge i {
            margin-right: 0.5rem;
            color: var(--primary);
        }
        
        .submit-btn {
            background-color: var(--primary) !important;
            color: white !important;
            border: none;
            border-radius: 4px;
            padding: 12px 30px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 1.5rem;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .submit-btn i {
            margin-right: 8px;
        }
        
        .submit-btn:hover {
            background-color: var(--primary-dark) !important;
        }
    </style>
    <script src="https://unpkg.com/i18next@21.9.1/dist/umd/i18next.min.js"></script>
    <script src="https://unpkg.com/i18next-browser-languagedetector@6.1.3/i18nextBrowserLanguageDetector.min.js"></script>
    <script src="https://unpkg.com/i18next-http-backend@1.4.5/i18nextHttpBackend.min.js"></script>
</head>
<body>
    <div class="form-container" style="max-width: 600px; text-align: center;">
        <div class="form-header">
            <div class="logo-container">
                <div class="logo-wrapper">
                    <i class="fas fa-car logo-icon"></i>
                    <span class="logo-text" data-i18n="form.logo">Wij Kopen Auto's</span>
                </div>
                <div class="trust-badge">
                    <i class="fas fa-shield-alt"></i>
                    <span data-i18n="form.trustBadge">Trusted Dealer</span>
                </div>
            </div>
            <h1 data-i18n="success.title"></h1>
        </div>

        <div style="padding: 30px;">
            <div style="font-size: 60px; color: var(--success); margin-bottom: 20px;">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2 data-i18n="success.subtitle"></h2>
            <p data-i18n="success.message"></p>
            <p data-i18n="success.contact" data-i18n-phone="+32 467 60 15 10"></p>
            
            <a href="/" class="submit-btn" style="text-decoration: none; display: inline-block; width: auto; padding: 12px 30px;">
                <i class="fas fa-arrow-left"></i> <span data-i18n="success.backToHome"></span>
            </a>
        </div>
    </div>

    <script>
        // Get language from URL parameter or use browser language
        const urlParams = new URLSearchParams(window.location.search);
        const langParam = urlParams.get('lang');
        
        // Initialize i18next
        i18next
            .use(i18nextHttpBackend)
            .use(i18nextBrowserLanguageDetector)
            .init({
                fallbackLng: 'en',
                lng: langParam || undefined, // Use URL parameter if provided
                supportedLngs: ['en', 'fr', 'nl'],
                debug: false, // Debug disabled for production
                detection: {
                    order: ['querystring', 'navigator'],
                    lookupQuerystring: 'lang',
                    caches: [] // Disable language caching
                },
                backend: {
                    loadPath: 'public/locales/{{lng}}/translation.json'
                },
                interpolation: {
                    escapeValue: false // Allows HTML in translations
                }
            })
            .then(function () {
                updateContent();

                // Set up language selector if it exists
                const langSelector = document.getElementById('language-selector');
                if (langSelector) {
                    langSelector.value = i18next.language;
                    langSelector.addEventListener('change', (e) => {
                        // Update URL with new language
                        const url = new URL(window.location);
                        url.searchParams.set('lang', e.target.value);
                        window.history.pushState({}, '', url);
                        
                        i18next.changeLanguage(e.target.value);
                    });
                }
            });

        // Listen for language changes
        i18next.on('languageChanged', () => {
            updateContent();
        });

        // Update content with translations
        function updateContent() {
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (key) {
                    // Handle nested keys
                    const keys = key.split('.');
                    let translation = i18next.t(key);
                    
                    // Handle dynamic attributes
                    if (element.hasAttribute('data-i18n-phone')) {
                        translation = translation.replace('{{phone}}', element.getAttribute('data-i18n-phone'));
                    }
                    
                    element.innerHTML = translation;
                }
            });
            
            // Update page title
            document.title = i18next.t('success.pageTitle');
            
            // Update HTML lang attribute
            document.documentElement.lang = i18next.language;
        }
    </script>
</body>
</html>